<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>使用Animejs构建图片背景动画</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js" integrity="sha512-aNMyYYxdIxIaot0Y1/PLuEu3eipGCmsEUBrUq+7aVyPGMFH8z0eTP0tkqAvv34fzN6z+201d3T8HPb1svWSKHQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<body>

<div class="container"></div>

<script>
  const container = document.querySelector('.container');

  for (let i = 0; i < 10; i++) {
    for (let j = 0; j < 20; j++) {
      let block = document.createElement('div');
      block.style.left = `${j * 5}vw`;
      block.style.top = `${i * 5}vw`;
      block.style.backgroundPosition = `-${j * 5}vw -${i * 5}vw`;
      block.style.transform = `translateX(${anime.random(360, 2100)}px) translateX(${anime.random(3600, -2100)}px) rotate(${anime.random(-360, 360)}deg) scale(0)`;
      block.classList.add('block');
      container.appendChild(block)
    }
  }

  const blocks = document.querySelectorAll('.block');
  let animation = anime.timeline({
    targets: blocks,
    easing: 'easeInOutExpo',
    loop: true,
    delay: anime.stagger(10, { start: 50 })
  })


  animation
    .add({
      scale: 1,
      translateX: 0,
      translateY: 0,
      rotate: 0,
      duration: () => anime.random(500, 3000),
    })
    .add({
      scale: 0,
      translateX: () => anime.random(360, 2100),
      translateY: () => anime.random(360, -2100),
      rotate: () => anime.random(-360, 360),
      duration: () => anime.random(500, 3000),
    })

</script>

</body>
</html>
